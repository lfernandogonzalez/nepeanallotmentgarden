<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="js/amazon-cognito-identity.min.js"></script>
  <script src="js/config.js"></script>
  <script type="text/javascript" src="js/admin.js"></script>
  
  <script type="text/javascript" src="js/admin_members.js"></script>
  <script type="text/javascript" src="js/admin_plots.js"></script>
  <script type="text/javascript" src="js/admin_waiting_list.js"></script>
  <link rel="stylesheet" href="css/main.css">
  <link rel="stylesheet" href="css/admin.css">
  <script type="text/javascript" src="js/autocomplete.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.js"></script>

</head>

<body>
  
  <!--Header -->
  <div class="header">
    <div class="header_logo"><a href="index.html"><img src="img/logo.png"></a></div>
    <br><div class="header_title">Admin console</div>
    <div class="header_social">
      <a href="https://www.facebook.com/groups/261282425387342" target="_blank"><img src="img/facebook.png" width="20" border="0"></a>
      <a href="https://www.instagram.com/nepean_allotment_gardens/" target="_blank"><img src="img/Instagram.png" width="20" border="0"></a>
    </div>
  </div>


    <!-- Admin console-->
    <div id="admin_console_container" class="admin_console">
        Only user with administrative access (board members) can access this section
        <br><br>

        <div class="admin_tab">
            <input type="button" class="admin_tab_buttons active" onclick="open_admin_tab(event, 'members_container');get_members();"  id="defaultTab" value="Members">
            <input type="button"  class="admin_tab_buttons" onclick="open_admin_tab(event, 'waiting_list_container');get_waiting_list()" value="Waiting List">
            <input type="button"  class="admin_tab_buttons" onclick="open_admin_tab(event, 'plots_container');get_plots();" value="Plots">
            
        </div>



        <!-- Members -->


        <div class="add_member_form"  style="display:none">
            <h3>Add member</h3>
            <p>
                <b>Email:</b>
                <br><input id="admin_input_email" type="text" placeholder="Email address">
                <br><br><input id="admin_input_admin" type="checkbox"> Admin
            </p>

            <p>
                <b>Name:</b>
                <br><input id="admin_input_first_name" type="text" Placeholder="First Name">
                <br><input id="admin_input_last_name" type="text"  Placeholder="Last Name">  
            </p>

            <p>
                <b>Address:</b>
                <br><input id="admin_input_street_address" type="text" Placeholder="Street Address" >
                <br><input id="admin_input_postal_code" type="text" Placeholder="Postal Code" >
            </p>

            <p>    
                <b>Phone number:</b>
                <br><input  id="admin_input_phone_number" type="text" Placeholder="Phone number" >
            </p>
            
            <p>  
                <input type="checkbox" id="admin_input_request_plot" onclick="request_plot_checkbox(this.checked)"><b>Add to waiting list:</b>
                <div id="admin_request_plot_container" style="display: none;">
                    <select id="admin_input_request_plot_type" style="width: 50%; box-sizing: border-box;height:50px; ">
                        <option value="Annual">Annual</option>
                        <option value="Perennial">Perennial</option>
                        <option value="Raised bed">Raised bed</option>
                        <option value="Locker">Locker</option>
                    </select>
                    
                    <input type="text" id="admin_input_request_plot_date" style="width: 50%; height:50px; box-sizing: border-box;" value="">
                    
                    <script>
                        const date = new Date().toISOString().split('T')[0];
                        document.getElementById('admin_input_request_plot_date').value = date;
                    </script>
                    
                    <input type="hidden" id="admin_input_request_plot_number" value="First available">
                </div>
                  
            </p>

            <input type="button" onclick="add_member();" value="Add member">
            <input type="button" onclick="open_add_member(false);" style="background-color: tomato" value="Cancel">

        </div>


        <div id='members_container' class="admin_tab_content"> 
            
            
            <div class="admin_controls" id="admin_controls_members">
                <div class="in_line">
                    <b>Filter:</b><br><select id="filter_members" onchange="filter('members')"><option value="all_members">All members</option><option value="current_renters" selected>Active members</option></select>
                </div>

                <div class="in_line">
                    <b>Search:</b><br>
                    <input type="text" id="search_members" onkeyup="search('members')" placeholder="Search by email">
                </div>

                <div class="in_line">
                    <br><input type="button" value="Add new user" style="width:150px" onclick="open_add_member(true)">
                    
                </div>

                <div class="in_line">
                    <br>
                    <a href="https://w84gzsjbui.execute-api.us-east-1.amazonaws.com/default/download_members"><img src="img/icon-download.webp" style="padding-left:20px; cursor:pointer; padding-top:10px; height:25px; border:none"></a>
                </div>
                
            </div>

            <div id="all_members"></div>
                        
        </div>


        <div id="plots_container"  class="admin_tab_content">
            <div class="admin_controls" id="admin_controls_plots">
                
                <div class="in_line">
                <b>Filter:</b><br><select id="filter_plots" onchange="filter('plots')"><option value="all_plots">All plots</option></select>
                </div>
                <div class="in_line">
                <b>Search:</b><br>
                <input type="text" id="search_plots" onkeyup="search('plots')" placeholder="Search by plot number">
            </div>
                <div class="in_line" style="vertical-align: bottom;">
                <input type="button" value="Add new plot" style="width:150px" onclick="open_add_plot(true)">
                </div>


                <div class="in_line">
                    <br>
                    <a href="https://boeoefpsa6.execute-api.us-east-1.amazonaws.com/default/download_plots"><img src="img/icon-download.webp" style="padding-left:20px; cursor:pointer; padding-top:10px; height:25px; border:none"></a>
                </div>
                

            
            </div>

            
            <div class="add_plot_form" class="admin_controls" style="display:none">
                
                <p>
                    <b>Plot number:</b><br><input type="text" id="input_plotId" style="width:100px" placeholder="Number" required>
                </p>

                <p>
                    <b>Type:</b><br>
                    <select id="input_plot_type">
                    <option>Select one</option>
                    <option>Raised bed</option>
                    <option>Annual</option>
                    <option>Perennial</option>
                    <option>Locker</option>
                    </select>
                </p>
                <p>
                    <b>Size:</b><br>
                    <input type="text" id="input_plot_width"  placeholder="Width (feet)" style="width:100px" required>
                    <input type="text" id="input_plot_height"  placeholder="Height (feet)" style="width:100px" required>
                </p>
                <p>
                    <b>Rate:</b><br>
                    <input type="text" id="input_plot_rate"  placeholder="Rate ($)" style="width:100px" required>
                </p>
                <p>
                    <br><input type="button" onclick="add_plot();" value="Add plot">
                    <input type="button" onclick="open_add_plot();" style="background-color: tomato" value="Cancel">
                    
                </p> 
            </div>

            <br><div id="all_plots"></div>
            </div>

            <div id="waiting_list_container" class="admin_tab_content">

            <div class="admin_controls" id="admin_controls_waiting_list">
                
                <div class="in_line">
                <b>Filter:</b><br><select id="filter_waiting_lists" onchange="filter('waiting_lists')"><option value="all_waiting_lists">All waiting lists</option></option></select>
                </div>
                <div class="in_line">
                <b>Search:</b><br>
                <input type="text" id="search_waiting_lists" onkeyup="search('waiting_lists')" placeholder="Search by email">
                </div>

                
                

                
            </div>

            <div id="add_waiting_list_form" class="admin_controls" style="display:none">
            
            <div class="in_line">
                <b>Email:</b>
                <br>
                <div class='autocomplete'><input type="text" id="add_waiting_list_email"  placeholder="Email address" required></div>
                
            </div>
            <div class="in_line">
                <b>Plot type:</b>
                <br><select id="add_waiting_list_plot_type">
                <option value="Raised beds">Raised bed</option>
                <option value="Annuals">Annual</option>
                <option value="Perennials"  id="perennial_option" >Perennial</option>
                <option value="Lockers">Locker</option>
                </select> 
            </div>
            <div class="in_line">
                <b>Desired plot:</b><br><input type="text" id="add_waiting_list_plot_number"  placeholder="" >
            </div>
            <div class="in_line">
                <b>Plot to trade:</b><br><input type="text" id="add_waiting_list_trade_option"  placeholder="" >
            </div>
            <br>
            
            <input type="button" onclick="add_to_waiting_list(true);" style="width:150px" value="Add to waiting list">
            <input type="button" onclick="close_add_waiting_list();" style="background-color: tomato" value="Cancel">
            </div>
            <br><div id="all_waiting_lists"></div>



            </div>


            </div>
        </div>




<!-- Overlay -->
<div id="overlay" class="overlay"></div>


<script>
       window.onload = function(){  get_user();}
  
  </script>

</body>


</html>
